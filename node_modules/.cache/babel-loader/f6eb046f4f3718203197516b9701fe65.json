{"remainingRequest":"/Users/11356979/upload-death-certificate-project/node_modules/babel-loader/lib/index.js!/Users/11356979/upload-death-certificate-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/11356979/upload-death-certificate-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/11356979/upload-death-certificate-project/src/components/UploadImagePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/11356979/upload-death-certificate-project/src/components/UploadImagePage.vue","mtime":1606733095404},{"path":"/Users/11356979/upload-death-certificate-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/11356979/upload-death-certificate-project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/11356979/upload-death-certificate-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/11356979/upload-death-certificate-project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aGFpRGF0ZTogWyfguZEnLCAn4LmSJywgJ+C5kycsICfguZQnLCAn4LmVJywgJ+C5licsICfguZcnLCAn4LmYJywgJ+C5mScsICfguZHguZAnLCAn4LmR4LmRJywgJ+C5keC5kicsICfguZHguZMnLCAn4LmR4LmUJywgJ+C5keC5lScsICfguZHguZYnLCAn4LmR4LmXJywgJ+C5keC5mCcsICfguZHguZknLCAn4LmS4LmQJywgJ+C5kuC5kScsICfguZLguZInLCAn4LmS4LmTJywgJ+C5kuC5lCcsICfguZLguZUnLCAn4LmS4LmWJywgJ+C5kuC5lycsICfguZLguZgnLCAn4LmS4LmZJywgJ+C5k+C5kCcsICfguZPguZEnXSwKICAgICAgdGhhaU51bWJlcjogWyfguZAnLCAn4LmRJywgJ+C5kicsICfguZMnLCAn4LmUJywgJ+C5lScsICfguZYnLCAn4LmXJywgJ+C5mCcsICfguZknXSwKICAgICAgY3VycmVudEltYWdlOiBuZXcgSW1hZ2UoKSwKICAgICAgaW1nUGF0aEZyb21DYW52YXM6ICIiLAogICAgICBiaXJ0aERhdGU6IG5ldyBEYXRlKCksCiAgICAgIGlzU2VsZWN0ZWREYXRlOiBmYWxzZSwKICAgICAgaXNTZWxlY3RlZEltYWdlOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUNhbnZhc0ltYWdlOiBmdW5jdGlvbiB1cGRhdGVDYW52YXNJbWFnZShlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciByZWFkZXIsCiAgICAgICAgICBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzOwogICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwoKICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgc2VsZi5kcmF3Q2FudmFzSW1hZ2UoaW1nKTsKICAgICAgICB9OwoKICAgICAgICBpbWcuc3JjID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgIF90aGlzLmN1cnJlbnRJbWFnZSA9IGltZzsKICAgICAgICBfdGhpcy5pc1NlbGVjdGVkSW1hZ2UgPSB0cnVlOwogICAgICB9OwoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZXNbMF0pOwogICAgfSwKICAgIGdvVG9SZXN1bHRJbWFnZVBhZ2U6IGZ1bmN0aW9uIGdvVG9SZXN1bHRJbWFnZVBhZ2UoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAncmVzdWx0JywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGltYWdlUGF0aDogdGhpcy5pbWdQYXRoRnJvbUNhbnZhcwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZHJhd0NhbnZhc0ltYWdlOiBmdW5jdGlvbiBkcmF3Q2FudmFzSW1hZ2UoaW1nKSB7CiAgICAgIHZhciBjYW52YXMgPSB0aGlzLiRyZWZzLmltYWdlQ2FudmFzOwogICAgICBjYW52YXMud2lkdGggPSA1NTA7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSA3NTA7CiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY3R4LmZpbGxTdHlsZSA9ICd3aGl0ZSc7CiAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICBjdHguZm9udCA9ICIycmVtIFRoYXNhZGl0aCI7CiAgICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7CiAgICAgIGN0eC5maWxsVGV4dCh0aGlzLmdldEJpcnRoRGF0ZVN0cmluZyh0aGlzLmJpcnRoRGF0ZSksIGNhbnZhcy53aWR0aCAvIDIsIDU3MCk7CiAgICAgIGN0eC5maWxsVGV4dCh0aGlzLmdldERlYXRoRGF0ZVN0cmluZygpLCBjYW52YXMud2lkdGggLyAyLCA2NTApOwogICAgICBjdHguZHJhd0ltYWdlKGltZywgNTAsIDUwLCA0NTAsIDQ1MCk7CiAgICAgIHZhciBpbWFnZVBhdGggPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9qcGVnIiwgMS4wKTsKICAgICAgdGhpcy5pbWdQYXRoRnJvbUNhbnZhcyA9IGltYWdlUGF0aDsKICAgIH0sCiAgICBvblNlbGVjdERhdGU6IGZ1bmN0aW9uIG9uU2VsZWN0RGF0ZShldmVudCkgewogICAgICB0aGlzLmJpcnRoRGF0ZSA9IGV2ZW50LnRhcmdldC52YWx1ZUFzRGF0ZTsKICAgICAgdGhpcy5pc1NlbGVjdGVkRGF0ZSA9IHRydWU7CgogICAgICBpZiAodGhpcy5pc1NlbGVjdGVkSW1hZ2UpIHsKICAgICAgICB0aGlzLmRyYXdDYW52YXNJbWFnZSh0aGlzLmN1cnJlbnRJbWFnZSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRCaXJ0aERhdGVTdHJpbmc6IGZ1bmN0aW9uIGdldEJpcnRoRGF0ZVN0cmluZyhkYXRldGltZSkgewogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICB5ZWFyOiAnbnVtZXJpYycsCiAgICAgICAgbW9udGg6ICdsb25nJywKICAgICAgICBkYXk6ICdudW1lcmljJwogICAgICB9OwogICAgICBkYXRldGltZSA9IG5ldyBEYXRlKGRhdGV0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoJ3RoLVRIJywgb3B0aW9ucyk7CiAgICAgIHZhciBkYXRlQXJyID0gZGF0ZXRpbWUuc3BsaXQoIiAiKTsKICAgICAgdmFyIGRhdGUgPSB0aGlzLnRoYWlEYXRlW2RhdGVBcnJbMF0gLSAxXTsKICAgICAgdmFyIG1vbnRoID0gZGF0ZUFyclsxXTsKICAgICAgdmFyIHllYXIgPSB0aGlzLmdldFRoYWlZZWFyKGRhdGVBcnJbMl0pOwogICAgICByZXR1cm4gIlx1MEUwQVx1MEUzMlx1MEUxNVx1MEUzMCAiLmNvbmNhdChkYXRlLCAiICIpLmNvbmNhdChtb250aCwgIiBcdTBFMUUuXHUwRTI4LiAiKS5jb25jYXQoeWVhcik7CiAgICB9LAogICAgZ2V0RGVhdGhEYXRlU3RyaW5nOiBmdW5jdGlvbiBnZXREZWF0aERhdGVTdHJpbmcoKSB7CiAgICAgIHJldHVybiAiXHUwRTIxXHUwRTIzXHUwRTEzXHUwRTMwIFx1MEU1MVx1MEU1OSBcdTBFMThcdTBFMzFcdTBFMTlcdTBFMjdcdTBFMzJcdTBFMDRcdTBFMjEgXHUwRTFFLlx1MEUyOC4gXHUwRTUyXHUwRTU1XHUwRTU2XHUwRTUzIjsKICAgIH0sCiAgICBnZXRUaGFpWWVhcjogZnVuY3Rpb24gZ2V0VGhhaVllYXIoeWVhcikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB5ZWFyQXJyID0geWVhci5zcGxpdCgnJyk7CiAgICAgIHllYXJBcnIuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICB5ZWFyQXJyW2luZGV4XSA9IF90aGlzMi50aGFpTnVtYmVyW2VsZW1lbnRdOwogICAgICB9KTsKICAgICAgcmV0dXJuIHllYXJBcnIuam9pbignJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["UploadImagePage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col mb-3\">\n          <input type=\"file\" id=\"imageLoader\" class=\"my-2\" :disabled=\"!isSelectedDate\" @change=\"updateCanvasImage\"/>\n          <input type=\"date\" id=\"dateSelector\" class=\"my-2\" @input=\"onSelectDate($event)\" />\n          <div style=\"background-color:black;\" class=\"bg-canvas\">\n            <canvas id=\"imageCanvas\" ref=\"imageCanvas\" style=\"background-color:white;\" width=\"600\" height=\"850\"></canvas>\n            <div><button type=\"button\" class=\"btn btn-light btn-lg\" @click=\"goToResultImagePage\">Next</button></div>\n        </div>\n        </div>\n    </div>\n</template> \n\n<script>\n\nexport default {\n    data:function(){\n      return {thaiDate : ['๑', '๒', '๓', '๔', '๕', '๖', '๗', '๘', '๙', '๑๐', \n                  '๑๑', '๑๒', '๑๓', '๑๔', '๑๕', '๑๖', '๑๗', '๑๘', '๑๙', '๒๐', \n                  '๒๑', '๒๒', '๒๓', '๒๔', '๒๕', '๒๖', '๒๗', '๒๘', '๒๙', '๓๐', '๓๑'],\n              thaiNumber : ['๐', '๑', '๒', '๓', '๔', '๕', '๖', '๗', '๘', '๙'],\n              currentImage : new Image(),\n              imgPathFromCanvas : \"\",\n              birthDate: new Date(),\n              isSelectedDate : false,\n              isSelectedImage : false\n      }\n    },\n    methods: {\n        updateCanvasImage(e) {\n            var self = this;\n            var reader, files = e.target.files;\n            reader = new FileReader();\n \n            reader.onload = (e) => {\n                var img = new Image();\n                img.onload = function() {\n                    self.drawCanvasImage(img);\n                }\n                img.src = e.target.result;\n                this.currentImage = img;\n                this.isSelectedImage = true;\n            };\n \n            reader.readAsDataURL(files[0]);\n \n        },\n\n        goToResultImagePage(){\n          this.$router.push({name : 'result', params: {imagePath : this.imgPathFromCanvas}});\n        },\n \n        drawCanvasImage(img) {\n            var canvas = this.$refs.imageCanvas;\n            canvas.width = 550;\n            canvas.height = 750;\n \n            var ctx = canvas.getContext('2d');\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0,0,canvas.width,canvas.height);\n\n            ctx.font = \"2rem Thasadith\";\n            ctx.textAlign = \"center\";\n            ctx.fillStyle = 'black';\n            ctx.fillText(this.getBirthDateString(this.birthDate), canvas.width/2, 570);\n            ctx.fillText(this.getDeathDateString(), canvas.width/2, 650);\n            \n            ctx.drawImage(img, 50, 50, 450, 450);\n            \n            var imagePath = canvas.toDataURL(\"image/jpeg\", 1.0);\n            this.imgPathFromCanvas = imagePath;\n        },\n\n        onSelectDate(event){\n          this.birthDate = event.target.valueAsDate;\n          this.isSelectedDate = true;\n          if(this.isSelectedImage){\n              this.drawCanvasImage(this.currentImage);\n          }\n        },\n\n        getBirthDateString(datetime){\n          const options = {year: 'numeric', month: 'long', day: 'numeric' };\n          datetime = new Date(datetime).toLocaleDateString('th-TH', options);\n          var dateArr = datetime.split(\" \");\n          var date = this.thaiDate[dateArr[0]-1];\n          var month = dateArr[1];\n          var year = this.getThaiYear(dateArr[2]);\n          return `ชาตะ ${date} ${month} พ.ศ. ${year}`;\n        },\n\n        getDeathDateString(){\n          return `มรณะ ๑๙ ธันวาคม พ.ศ. ๒๕๖๓`;\n        },\n        \n        getThaiYear(year){\n          var yearArr = year.split('');\n          yearArr.forEach((element, index) => {\n            yearArr[index] = this.thaiNumber[element];\n          });\n          return yearArr.join('');\n        }\n    }\n}\n</script>\n\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n@import url('https://fonts.googleapis.com/css2?family=Kanit:wght@200;400&family=Thasadith:ital@1&display=swap');\n\n.bg-canvas {\n  height: 100%;\n  width: 60%;\n  margin: auto;\n  padding-top: 20px;\n}\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"],"sourceRoot":"src/components"}]}